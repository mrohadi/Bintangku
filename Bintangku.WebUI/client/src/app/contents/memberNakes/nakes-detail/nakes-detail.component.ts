import { Component, Inject, OnInit } from '@angular/core';
import { MatDialogRef, MAT_DIALOG_DATA } from '@angular/material/dialog';
import { MatIconRegistry } from '@angular/material/icon';
import { DomSanitizer } from '@angular/platform-browser';
import { ActivatedRoute } from '@angular/router';
import { MemberNakes } from 'src/app/_models/memberNakes';
import { MembersNakesService } from 'src/app/_services/membersNakes.service';

const WA = `<svg width="14" height="14" viewBox="0 0 14 14" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M7.0267 0.333322C3.3867 0.333322 0.420033 3.29999 0.420033 6.93999C0.420033 8.10666 0.726699 9.23999 1.30003 10.24L0.366699 13.6667L3.8667 12.7467C4.83337 13.2733 5.92003 13.5533 7.0267 13.5533C10.6667 13.5533 13.6334 10.5867 13.6334 6.94666C13.6334 5.17999 12.9467 3.51999 11.7 2.27332C11.0888 1.65594 10.3608 1.16643 9.55846 0.833356C8.75609 0.500278 7.89544 0.330296 7.0267 0.333322ZM7.03337 1.44666C8.50003 1.44666 9.87337 2.01999 10.9134 3.05999C11.4238 3.57023 11.8284 4.1762 12.1041 4.84316C12.3798 5.51013 12.5212 6.22495 12.52 6.94666C12.52 9.97332 10.0534 12.4333 7.0267 12.4333C6.04003 12.4333 5.07337 12.1733 4.23337 11.6667L4.03337 11.5533L1.95337 12.1L2.5067 10.0733L2.37337 9.85999C1.82266 8.98577 1.53137 7.9732 1.53337 6.93999C1.54003 3.91332 4.00003 1.44666 7.03337 1.44666ZM4.6867 3.88666C4.58003 3.88666 4.40003 3.92666 4.2467 4.09332C4.10003 4.25999 3.6667 4.66666 3.6667 5.47332C3.6667 6.28666 4.26003 7.06666 4.33337 7.17999C4.4267 7.29332 5.5067 8.95999 7.1667 9.66666C7.56003 9.84666 7.8667 9.94666 8.1067 10.02C8.50003 10.1467 8.86003 10.1267 9.1467 10.0867C9.4667 10.04 10.12 9.68666 10.26 9.29999C10.4 8.91332 10.4 8.58666 10.36 8.51332C10.3134 8.44666 10.2067 8.40666 10.04 8.33332C9.87336 8.23999 9.06003 7.83999 8.91337 7.78666C8.76003 7.73332 8.6667 7.70666 8.54003 7.86666C8.43337 8.03332 8.11337 8.40666 8.02003 8.51332C7.92003 8.62666 7.8267 8.63999 7.6667 8.55999C7.49337 8.47332 6.96003 8.29999 6.33337 7.73999C5.84003 7.29999 5.51337 6.75999 5.41337 6.59332C5.33337 6.43332 5.4067 6.33332 5.4867 6.25999C5.56003 6.18666 5.6667 6.06666 5.73337 5.96666C5.82003 5.87332 5.8467 5.79999 5.90003 5.69332C5.95337 5.57999 5.9267 5.48666 5.8867 5.40666C5.8467 5.33332 5.51337 4.50666 5.37337 4.17999C5.24003 3.85999 5.1067 3.89999 5.00003 3.89332C4.9067 3.89332 4.80003 3.88666 4.6867 3.88666Z" fill="#003466"/>
</svg>
`;
const LINE = `<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M12.9085 6.57553C12.965 6.57359 13.0213 6.58303 13.074 6.6033C13.1268 6.62357 13.1749 6.65425 13.2155 6.69351C13.2562 6.73277 13.2885 6.77981 13.3106 6.83183C13.3326 6.88385 13.344 6.93978 13.344 6.99628C13.344 7.05279 13.3326 7.10872 13.3106 7.16074C13.2885 7.21276 13.2562 7.2598 13.2155 7.29906C13.1749 7.33833 13.1268 7.369 13.074 7.38927C13.0213 7.40954 12.965 7.41898 12.9085 7.41703H11.739V8.16703H12.9085C12.9653 8.16426 13.0221 8.17305 13.0754 8.19288C13.1287 8.21271 13.1774 8.24317 13.2186 8.28239C13.2598 8.32162 13.2926 8.3688 13.315 8.42109C13.3374 8.47337 13.349 8.52965 13.349 8.58653C13.349 8.64342 13.3374 8.6997 13.315 8.75198C13.2926 8.80427 13.2598 8.85145 13.2186 8.89068C13.1774 8.9299 13.1287 8.96036 13.0754 8.98019C13.0221 9.00002 12.9653 9.00881 12.9085 9.00603H11.32C11.209 9.00564 11.1026 8.96128 11.0242 8.88267C10.9457 8.80405 10.9016 8.69758 10.9015 8.58653V5.40653C10.9015 5.17503 11.089 4.98503 11.32 4.98503H12.9115C13.0195 4.99061 13.1212 5.03751 13.1955 5.11602C13.2698 5.19452 13.3111 5.29861 13.3108 5.40673C13.3105 5.51484 13.2686 5.61868 13.1938 5.69674C13.119 5.7748 13.017 5.8211 12.909 5.82604H11.7395V6.57604L12.9085 6.57553ZM10.3415 8.58603C10.3406 8.6974 10.2957 8.80389 10.2167 8.88235C10.1377 8.96082 10.0309 9.00491 9.9195 9.00503C9.85356 9.00568 9.78838 8.99097 9.72911 8.96207C9.66984 8.93317 9.6181 8.89088 9.578 8.83853L7.9505 6.62503V8.58553C7.9505 8.69679 7.9063 8.80349 7.82763 8.88217C7.74896 8.96084 7.64226 9.00503 7.531 9.00503C7.41974 9.00503 7.31304 8.96084 7.23437 8.88217C7.1557 8.80349 7.1115 8.69679 7.1115 8.58553V5.40553C7.1115 5.22604 7.229 5.06504 7.398 5.00753C7.43973 4.99279 7.48374 4.98551 7.528 4.98603C7.658 4.98603 7.778 5.05653 7.8585 5.15553L9.499 7.37403V5.40553C9.499 5.17404 9.6865 4.98404 9.9185 4.98404C10.1505 4.98404 10.3405 5.17404 10.3405 5.40553L10.3415 8.58603ZM6.5135 8.58603C6.51297 8.69756 6.46826 8.80434 6.38916 8.88296C6.31007 8.96159 6.20303 9.00567 6.0915 9.00553C5.9808 9.00461 5.87495 8.96002 5.79695 8.88147C5.71896 8.80291 5.67513 8.69674 5.675 8.58603V5.40603C5.675 5.17454 5.8625 4.98453 6.0945 4.98453C6.326 4.98453 6.514 5.17454 6.514 5.40603L6.5135 8.58603ZM4.87 9.00553H3.2785C3.16709 9.00527 3.06028 8.96107 2.98127 8.88253C2.90226 8.80399 2.85742 8.69744 2.8565 8.58603V5.40603C2.8565 5.17454 3.0465 4.98453 3.2785 4.98453C3.5105 4.98453 3.698 5.17454 3.698 5.40603V8.16653H4.87C4.98126 8.16653 5.08796 8.21073 5.16663 8.2894C5.2453 8.36807 5.2895 8.47478 5.2895 8.58603C5.2895 8.69729 5.2453 8.80399 5.16663 8.88267C5.08796 8.96134 4.98126 9.00553 4.87 9.00553ZM16 6.87453C16 3.29403 12.4085 0.380035 8 0.380035C3.5915 0.380035 0 3.29403 0 6.87453C0 10.083 2.8465 12.7705 6.69 13.281C6.9505 13.3355 7.3045 13.453 7.396 13.6745C7.4765 13.8745 7.448 14.1845 7.422 14.396L7.3125 15.0755C7.281 15.276 7.151 15.865 8.0105 15.5055C8.8725 15.146 12.6225 12.787 14.302 10.854C15.4505 9.59653 16 8.30453 16 6.87453Z" fill="#003466"/>
</svg>
`;
export interface DialogData {
  username: string;
}

@Component({
  selector: 'app-nakes-detail',
  templateUrl: './nakes-detail.component.html',
  styleUrls: ['./nakes-detail.component.scss'],
})
export class NakesDetailComponent implements OnInit {
  memberNakes: MemberNakes;
  loading = false;

  constructor(
    private memberNakesService: MembersNakesService,
    private route: ActivatedRoute,
    iconRegistry: MatIconRegistry,
    sanitizer: DomSanitizer,
    public dialogRef: MatDialogRef<NakesDetailComponent>,
    @Inject(MAT_DIALOG_DATA) private data: DialogData
  ) {
    iconRegistry.addSvgIconLiteral(
      'whats-app',
      sanitizer.bypassSecurityTrustHtml(WA)
    );
    iconRegistry.addSvgIconLiteral(
      'line-app',
      sanitizer.bypassSecurityTrustHtml(LINE)
    );
  }

  ngOnInit(): void {
    // this.loadMemberNakes();
    this.loadMemberNakes(this.data.username);
  }

  loadMemberNakes(username: string) {
    this.loading = true;
    this.memberNakesService.getMemberNakes(username).subscribe(
      (memberNakes) => (this.memberNakes = memberNakes),
      () => {},
      () => {
        setTimeout(() => {
          this.loading = false;
        }, 1000);
      }
    );
  }
}
